<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결제하기</title>
    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> -->
    <style>
        .payment-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .menu-item-list {
            margin-bottom: 20px;
        }
        .menu-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        .total-price {
            font-size: 20px;
            font-weight: bold;
            margin-top: 10px;
            text-align: right;
        }
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .action-buttons button {
            width: 48%;
        }

        /* 모달 배경 (Overlay) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* 어두운 투명 배경 */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        /* 모달 내용 */
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 300px;
        }

        /* 모달 숨김 상태 */
        .hidden {
            display: none;
        }


    </style>
</head>
<body>
<div class="container mt-5">
    <div class="payment-container">
        <h2 class="text-center mb-4">결제수단 선택</h2>

        <!-- 제휴 할인 선택 -->
        <h4>제휴 할인</h4>
        <div class="action-buttons">
            <button id="btnKT" class="">KT</button>
            <button id="btnSKT" class="">SKT</button>
            <button id="btnCJ" class="">CJ ONE</button>
        </div>

        <!-- 결제 방법 선택 -->
        <h4>결제 방법</h4>
        <div class="action-buttons">
            <button id="payByCard" class="btn btn-primary">카드결제</button>
            <button id="" class="">앱카드</button>
            <button id="" class="">카카오페이</button>
            <button id="" class="">페이코</button>
            <button id="" class="">네이버페이</button>
            <button id="" class="">제로페이</button>
            <button id="" class="">BC 페이북</button>
            <button id="" class="">하나 Pay</button>
            <button id="" class="">KB Pay</button>
            <button id="" class="">애플페이</button>
            <button id="" class="">쿠폰사용</button>
            <button id="" class="">4조카페 선불카드</button>
        </div>

        <!-- 선택한 메뉴 리스트 -->
        <div class="menu-item-list">
            <h4>선택한 메뉴</h4>
            <div id="selectedMenuList"></div>
            <div class="total-price">
                총 금액: <span id="totalAmount">0원</span>
            </div>
        </div>


    </div>
</div>

<script>
    // 모달 DOM 요소 선택
    const modalOverlay = document.getElementById('modalOverlay');
    const modalTitle = document.getElementById('modalTitle');
    const modalText = document.getElementById('modalText');
    const closeModal = document.getElementById('closeModal');

    // 제휴 버튼 이벤트 추가
    document.getElementById('btnKT').addEventListener('click', () => openModal('KT'));
    document.getElementById('btnSKT').addEventListener('click', () => openModal('SKT'));
    document.getElementById('btnCJ').addEventListener('click', () => openModal('CJ ONE'));

    // 모달 열기 함수
    function openModal(partner) {
        modalTitle.textContent = `${partner} 적립하기`;
        modalText.textContent = `${partner} 포인트 적립을 진행합니다.`;
        modalOverlay.classList.remove('hidden');
    }

    // 모달 닫기 이벤트
    closeModal.addEventListener('click', () => {
        modalOverlay.classList.add('hidden');
    });


    // 전역 변수로 전달된 선택 항목과 가격 가져오기
    const selectedItems = JSON.parse(localStorage.getItem('selectedItems')) || {}; // 선택한 메뉴
    const totalPrice = localStorage.getItem('totalPrice') || 0; // 총 금액

    // 선택한 메뉴와 총 금액을 화면에 출력
    function renderSelectedItems() {
        const selectedMenuList = document.getElementById('selectedMenuList');
        const totalAmountElement = document.getElementById('totalAmount');
        selectedMenuList.innerHTML = '';

        for (const [name, item] of Object.entries(selectedItems)) {
        const menuItem = document.createElement('div');
        menuItem.className = 'menu-item';

        const itemName = document.createElement('span');
        itemName.textContent = `${name} (${item.count}개)`;

        const itemPrice = document.createElement('span');
        itemPrice.textContent = `${item.price * item.count}원`;

        menuItem.appendChild(itemName);
        menuItem.appendChild(itemPrice);
        selectedMenuList.appendChild(menuItem);
    }

    totalAmountElement.textContent = `${totalPrice}원`;
}

// 페이지 로드 시 선택한 항목 출력
renderSelectedItems();

    // 결제 버튼 동작 정의
    document.getElementById('payByCard').addEventListener('click', () => {
        alert('카드 결제를 진행합니다.');
        // 결제 완료 후 초기화
        localStorage.clear();
        window.location.href = 'success.html'; // 결제 성공 페이지로 이동
    });

    // 적립 버튼 동작 정의
    document.getElementById('savePoints').addEventListener('click', () => {
        alert('포인트 적립이 완료되었습니다.');
        // 결제 완료 후 초기화
        localStorage.clear();
        window.location.href = 'success.html'; // 적립 완료 페이지로 이동
    });

    // 페이지 로드 시 선택한 항목 출력
    renderSelectedItems();
</script>
</body>
</html>
